/* CUSTOM STORY STYLE */
.interactive
  position relative

  &__tooltip
    position absolute
    height auto
    width auto
    min-width 300px
    border 2px solid
    padding 4px
    transition top 0.5s, left 0.5s, opacity 0.25s
    pointer-events none
    opacity 0
    background-color white
    z-index 2
    &.visible
      opacity 0.95
    @media (max-width: 768px)
      border-radius 0px
      position fixed
      bottom 0px
      top auto
      left 0px
      height 25vh
      width 100vw
      &.visible
        pointer-events initial // allow click out of tooltip
      &:before
        display: none
    &_tail
      position absolute
      top -13px
      left -7px
      height 15px
      width 0px
      transform rotate(-45deg)
      border 1px solid

    &_question
      position relative
      set-type-size(medium, false)
      font-weight bold
      margin-bottom 4px
    &_category
      font-family $national
      text-transform uppercase
      set-type-size(xx-small, false)

    .image-question
      grid-row 2 / 3
      grid-column 1 / 2
      object-fit contain
      align-self center
      justify-self center
      max-width 100%
      max-height 100%
      height auto
      @media (max-width: 768px)
        opacity 0

  &__img
    display block
    height 300px
    width auto
    border 1px solid black
    max-width $column-width
    margin 0 auto
    margin-top 1rem
    text-align center
    @media (max-width: 768px)
      height 250px

  &__story-intro
    display block
    max-width $column-width
    margin 0 auto
    text-align justify
    height 0
    opacity 0
    transition opacity 0.5s, height 0.5s
    &.populated
      height auto
      opacity 1
    @media (max-width: 768px)
      padding 0px 10px

  .sticky-container
    display grid
    grid-template-columns 2fr 3fr 2fr
    grid-column-gap 20px
    position relative
    margin 0 auto
    margin-top 1rem
    text-align center
    @media (max-width: 768px)
      grid-template-columns 0fr 1fr 0fr
      grid-column-gap 0px

    .interactive__labels
      position absolute
      display block
      width 100%
      top 0px
      left 0px
      grid-column 2/3
      margin-top 1rem
      .label
        position absolute
        font-size 40px
        line-height 40px
        font-family $tiempos
        width 100%
        left 0px
        text-align left
        border-bottom 1px solid black
        transition transform 0.25s 0.25s, width 0.25s 0.25s
        &.current.has-story-step
          transform translateX(-250px)
          width calc(100% + 250px)
          transition transform 0.25s 0s, width 0.25s 0s
          .story-step
            opacity 1
            transition opacity 0.25s 0.25s
        @media (max-width: 768px)
          opacity 0.4
          font-size 140px
          text-anchor middle
          &.current
            font-size 150px
        .story-step
          position absolute
          top 40px
          width 250px
          opacity 0
          z-index 5
          pointer-events none // overlap with circles
          transition opacity 0.25s 0s
          &-header
            set-type-size(small, false)
            font-weight 600
          &-body
            set-type-size(x-small, true)
            margin-bottom 15px
          &-up
            position absolute
            top -70px
          &-down,
          &-up
            display flex
            align-items center
            font-family $national
            text-transform uppercase
            set-type-size(x-small, true)
            pointer-events initial
            img
              cursor pointer
              display inline
              width 20px
              height 20px
          .step-legend
            display block
            &-row
              height 20px
              font-family $national-narrow
              text-transform uppercase
              &-circle,
              &-term,
              &-number
                set-type-size(x-small, true)
                display inline-block
              &-circle
                height 8px
                width 8px
                border-radius 4px
              &-number
                width 20px
                text-align right
              &-term
                width 90px

    .interactive__svg
      display block
      margin-top 1rem
      text-align center
      grid-column 2 / 3
      z-index 1

      .line
        fill none

      circle
        stroke-width 1px
        stroke white
        transition fill 0.25s
        &.active
          stroke black
        &.inactive
          fill #aeaeae
        &.out-of-story
          filter grayscale(100%)
      @media (max-width: 768px)
        margin 0

    .interactive__history
      display block
      position relative
      grid-column 3 / 4
      margin-top 1rem
      &_flag
        position absolute
        width 1px
        border 1px solid #6bcff6
        text-align left
        &_years
          top -12px
          set-type-size(xx-small, true)
          font-weight bold
        &_event
          top 2px
          set-type-size(xxx-small)
          line-height 10px
          width 200px
        &_years, &_event
          position absolute
          left 7px
          min-width 120px
          z-index 1
          background-color #ffffff88
        &:before
          position absolute
          content ''
          width 4px
          height 4px
          top -4px
          left -4px
          background-color white
          border-radius 4px
          border 2px solid #6bcff6
        &:not(.one-year-only):after
          position absolute
          content ''
          width 4px
          height 4px
          bottom -4px
          left -4px
          background-color white
          border-radius 4px
          border 2px solid #6bcff6
      @media (max-width: 768px)
        visibility hidden
        position absolute
        width 0
        grid-column 1 / 2
      &_tick
        position absolute
        width 19px
        height 0px
        border 0.5px solid #aeaeaa
        left -9px

    .interactive__legend
      position fixed
      left 5%
      bottom 10vh
      width 23.33%
      transition opacity 0.25s
      opacity 0
      pointer-events none
      &.visible
        opacity 1
      &_tile
        set-type-size(x-small, true)
        margin-right 5px
        padding 2px
        display inline-block
        &.out-of-story
          opacity 0.3

.conclusion
  display block
  max-width $column-width
  margin 0 auto
  margin-top 1rem
  text-align center