/* CUSTOM STORY STYLE */
.interactive
  position relative

  // .intro__or-explore
  //   display block
  //   margin 0 auto 50px auto
  //   margin-top 1rem
  //   text-align center

  &__tooltip
    position absolute
    height auto
    width auto
    min-width 300px
    border 2px solid
    padding 4px
    // border-radius 10px
    // display grid
    // grid-template-rows 25px 8fr
    // grid-template-columns 5fr 3fr
    // grid-column-gap 10px
    transition top 0.5s, left 0.5s, opacity 0.25s
    pointer-events none
    opacity 0
    background-color white
    z-index 2
    &.visible
      opacity 0.95
    @media (max-width: 768px)
      border-radius 0px
      position fixed
      bottom 0px
      top auto
      left 0px
      height 25vh
      width 100vw
      &.visible
        pointer-events initial // allow click out of tooltip
      &:before
        display: none
    &_tail
      position absolute
      top -13px
      left -7px
      height 15px
      width 0px
      transform rotate(-45deg)
      border 1px solid

    &_question
      // grid-row 1 / 2
      // grid-column 1 / 3
      // padding 2px 4px
      // text-align center
      // border-top-right-radius 10px
      // border-top-left-radius 10px
      // border-bottom 1px solid
      position relative
      set-type-size(medium, false)
      font-weight bold
      margin-bottom 4px
      // padding-right 80px
    &_category
      font-family $national
      text-transform uppercase
      // position absolute
      // right -1px
      // top 0px
      // width 80px
      set-type-size(xx-small, false)
      // padding 4px 6px 3px 6px
      // border-top-right-radius 10px
      // @media (max-width: 768px)
      //   border-radius 0px

    // &_right-col
    //   grid-row 2 / 3
    //   grid-column 2 / 3
    //   margin-top 5px
    //   overflow-y hidden
    //   @media (max-width: 768px)
    //     grid-column 1/3
    //     display grid
    //     grid-template-columns 3fr 5fr
    //     grid-template-rows repeat(3, 25px) 1fr
    //     grid-column-gap 10px
    //     margin 5px 5px
    //   &.dblwide
    //     grid-column 1 / 3
    //     margin 5px auto
    //   &_qtype,
    //   &_unit,
    //   &_asked-of,
    //   &_notes
    //     display flex
    //     width 100%
    //     set-type-size(xx-small, true)
    //     @media (max-width: 768px)
    //       grid-column 1/2
    //     span
    //       padding-left 4px
    //       display flex
    //       flex-direction column
    //       justify-content space-around
    //   &_notes
    //     text-align center
    //     max-width 250px
    //   &_options
    //     padding 5px
    //     set-type-size(xxx-small, true)
    //     @media (max-width: 768px)
    //       set-type-size(x-small, true)
    //       grid-column 2/ 3
    //       grid-row 1/ 4
    //     ul.wrap
    //       overflow hidden
    //       columns 2
    //       column-gap 2px
    //     li
    //       set-type-size(xxx-small, true)
    //       @media (max-width: 768px)
    //         set-type-size(x-small, true)
    //         line-height 1.5
    // .image-unit,
    // .image-qtype,
    // .image-asked-of
    //   display inline-block
    //   height 24px
    //   width 24px

    .image-question
      grid-row 2 / 3
      grid-column 1 / 2
      object-fit contain
      align-self center
      justify-self center
      max-width 100%
      max-height 100%
      height auto
      @media (max-width: 768px)
        opacity 0

  &__img
    display block
    height 300px
    width auto
    border 1px solid black
    max-width $column-width
    margin 0 auto
    margin-top 1rem
    text-align center
    @media (max-width: 768px)
      height 250px

  &__story-intro
    display block
    max-width $column-width
    margin 0 auto
    // margin-top 1rem
    text-align justify
    height 0
    opacity 0
    transition opacity 0.5s, height 0.5s
    &.populated
      height auto
      opacity 1
    @media (max-width: 768px)
      padding 0px 10px

  // &__navigation
  //   display block
  //   margin 0 auto
  //   margin-top 1rem
  //   text-align center

  .sticky-container
    display grid
    grid-template-columns 2fr 3fr 2fr
    grid-column-gap 20px
    position relative
    margin 0 auto
    margin-top 1rem
    text-align center
    @media (max-width: 768px)
      grid-template-columns 0fr 1fr 0fr
      grid-column-gap 0px

    // .interactive__story-step
    //   position absolute
    //   width calc(100% - 20px)
    //   // left 20px
    //   // top 33.33vh
    //   height 33.33vh
    //   border-radius 10px
    //   color-glow($palette.green)
    //   transition opacity 0.25s
    //   opacity 0
    //   display grid
    //   grid-template-rows 25px 1fr
    //   grid-template-columns 1fr 24px
    //   @media (max-width: 768px)
    //     border-radius 0px
    //     position fixed
    //     bottom 0px
    //     top auto
    //     left 0px
    //     height 25vh
    //     width 100%

    //   &.visible
    //     opacity 1

    //   &-title
    //     border-bottom 1px solid
    //     border-bottom-color white
    //     grid-row 1 / 2
    //     grid-column 1 / 2
    //     set-type-size(root, true)
    //   &-body
    //     grid-row 2 / 3
    //     grid-column 1 / 2
    //     vertical-align middle
    //     set-type-size(small, false)
    //     text-align left
    //     padding 10px
    //     overflow-y scroll

    //   .interactive__story-stepper
    //     position relative
    //     grid-row 1 / 3
    //     grid-column 2 / 3
    //     border-left 1px solid
    //     border-left-color white
    //     height 100%
    //     width 100%

    //     &-dots
    //       position absolute
    //       height calc(100% - 48px)
    //       top 24px
    //       width 100%
    //       display flex
    //       flex-direction column
    //       justify-content space-around
    //       .step-dot
    //         height 10px
    //         width 10px
    //         border 1px solid white
    //         margin 0 auto
    //         border-radius 2px
    //         transition background-color 0.25s
    //         &.current
    //           background-color white
    //     &-up
    //       position absolute
    //       top 4px
    //       left -1px
    //       cursor pointer
    //     &-down
    //       position absolute
    //       bottom 4px
    //       left -1px
    //       cursor pointer

    .interactive__labels
      position absolute
      display block
      width 100%
      top 0px
      left 0px
      grid-column 2/3
      margin-top 1rem
      // z-index -1
      .label
        position absolute
        font-size 40px
        line-height 40px
        font-family $tiempos
        width 100%
        left 0px
        text-align left
        border-bottom 1px solid black
        transition transform 0.25s, width 0.25s
        &.current.has-story-step
          transform translateX(-250px)
          width calc(100% + 250px)
          .story-step
            opacity 1
        @media (max-width: 768px)
          opacity 0.4
          font-size 140px
          text-anchor middle
          &.current
            font-size 150px
        .story-step
          position absolute
          top 40px
          width 250px
          opacity 0
          z-index 5
          pointer-events none // overlap with circles
          &-header
            set-type-size(small, false)
            font-weight 600
          &-body
            set-type-size(x-small, true)
            margin-bottom 15px
          &-up
            position absolute
            top -70px
          &-down,
          &-up
            display flex
            align-items center
            font-family $national
            text-transform uppercase
            set-type-size(x-small, true)
            pointer-events initial
            img
              cursor pointer
              display inline
              width 20px
              height 20px
          .step-legend
            display block
            &-row
              height 20px
              font-family $national-narrow
              text-transform uppercase
              &-circle,
              &-term,
              &-number
                set-type-size(x-small, true)
                display inline-block
              &-circle
                height 8px
                width 8px
                border-radius 4px
              &-number
                width 20px
                text-align right
              &-term
                width 90px

    .interactive__svg
      display block
      margin-top 1rem
      text-align center
      grid-column 2 / 3
      z-index 1

      .line
        fill none

      circle
        stroke-width 1px
        stroke white
        transition fill 0.25s
        &.active
          // stroke-width 2px
          stroke black
        &.inactive
          fill #aeaeae
        &.out-of-story
          filter grayscale(100%)
      @media (max-width: 768px)
        margin 0

    .interactive__history
      display block
      position relative
      grid-column 3 / 4
      margin-top 1rem
      &_flag
        position absolute
        width 1px
        border 1px solid #6bcff6
        text-align left
        &_years
          top -12px
          set-type-size(xx-small, true)
          font-weight bold
        &_event
          top 2px
          set-type-size(xxx-small)
          line-height 10px
          width 200px
        &_years, &_event
          position absolute
          left 7px
          min-width 120px
          z-index 1
          background-color #ffffff88
        &:before
          position absolute
          content ''
          width 4px
          height 4px
          top -4px
          left -4px
          background-color white
          border-radius 4px
          border 2px solid #6bcff6
        &:not(.one-year-only):after
          position absolute
          content ''
          width 4px
          height 4px
          bottom -4px
          left -4px
          background-color white
          border-radius 4px
          border 2px solid #6bcff6
      @media (max-width: 768px)
        visibility hidden
        position absolute
        width 0
        grid-column 1 / 2
      &_tick
        position absolute
        width 19px
        height 0px
        border 0.5px solid #aeaeaa
        left -9px

    .interactive__legend
      position fixed
      left 5%
      bottom 10vh
      width 23.33%
      transition opacity 0.25s
      opacity 0
      pointer-events none
      &.visible
        opacity 1
      &_tile
        set-type-size(x-small, true)
        margin-right 5px
        padding 2px
        display inline-block
        &.out-of-story
          opacity 0.3

.conclusion
  display block
  max-width $column-width
  margin 0 auto
  margin-top 1rem
  text-align center